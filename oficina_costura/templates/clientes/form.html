{% extends "base.html" %} {% block content %}
<h1>ðŸ‘¤ Novo Cliente</h1>

<div class="card">
  <form method="post" autocomplete="off">
    {% csrf_token %} {% for field in form %}
    <label>
      {{ field.label }} {{ field }} {% if field.errors %}
      <small style="color: red">{{ field.errors }}</small>
      {% endif %}
    </label>
    {% endfor %}

    <div style="margin-top: 20px">
      <button type="submit" class="btn-primary">ðŸ’¾ Salvar</button>
      <a href="{% url 'clientes_listar' %}" class="btn-cancel">Cancelar</a>
    </div>
  </form>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const input = document.getElementById("telefone");
    if (!input) return;

    input.addEventListener("input", function () {
      input.value = input.value.replace(/\D/g, "").slice(0, 11);
    });

    input.addEventListener("blur", function () {
      let v = input.value;
      if (v.length === 11) {
        input.value = `(${v.slice(0, 2)}) ${v.slice(2, 7)}-${v.slice(7)}`;
      }
      if (v.length === 9) {
        input.value = `(12) ${v.slice(0, 5)}-${v.slice(5)}`;
      }
    });

    input.addEventListener("focus", function () {
      input.value = input.value.replace(/\D/g, "");
    });
  });
</script>
{% endblock %}
